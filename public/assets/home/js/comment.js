(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{487:function(e,t,n){"use strict";n.r(t);var i=n(496).a,r=n(1),o=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"CS3"},[n("div",{staticClass:"tab-bar clearfix"},[e.showTotal?n("div",{staticClass:"tab-bar-left"},[n("h3",[e._v(e._s(e.commentsCount)+" Comments")])]):e._e(),e._v(" "),n("TabBarOrderView")],1),e._v(" "),n("div",{staticClass:"comment-embed"},[e.lock?n("div",{staticClass:"notice-message"},[n("p",{staticClass:"align-center"},[e._v("This post is locked.")])]):e._e(),e._v(" "),n("CommentInputView",{attrs:{idStateKey:e.postId}}),e._v(" "),n("CommentListView",{attrs:{isSection:!0}}),e._v(" "),n("CommentListView",{attrs:{isSection:!1}})],1)])}),[],!1,null,null,null);t.default=o.exports},488:function(e,t,n){"use strict";(function(e){var i=n(509),r=n(491),o=n(34),u={track:function(t,n){e.log("Event tracking",t,n),n=this.formatCustomVaribles(n),o.default.track(t.c,t.a,t.l,"",n)},convertOrderName:function(e){return e==r.c?"Fresh":"Hot"},formatCustomVaribles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.a.state.postKey&&(e.PostKey=i.a.state.postKey);var t=i.a.state.order;return e.CommentOrder=this.convertOrderName(t),e}};t.a=u}).call(this,n(17).default)},489:function(e,t,n){"use strict";var i="CommentAction",r={writeComment:{c:i,a:"WriteComment",l:""},addComment:{c:i,a:"AddComment",l:"Add"},replyComment:{c:i,a:"AddComment",l:"Reply"},deleteComment:{c:i,a:"DeleteComment",l:""},upvoteComment:{c:i,a:"UpvoteComment",l:""},downvoteComment:{c:i,a:"DownvoteComment",l:""},unvoteComment:{c:i,a:"UnvoteComment",l:""},reportComment:{c:i,a:"ReportComment",l:""},opHideComment:{c:i,a:"OpHideComment",l:""},followThreadByReply:{c:i,a:"FollowThreadByReply",l:""},unfollowThreadByReply:{c:i,a:"UnfollowThreadByReply",l:""},clickOrderHot:{c:i,a:"TapHot",l:""},clickOrderFresh:{c:i,a:"TapFresh",l:""},openCommentMenu:{c:i,a:"TapCommentMenu",l:"Open"},closeCommentMenu:{c:i,a:"TapCommentMenu",l:"Close"},clickReply:{c:i,a:"TapReply",l:""},loadMore:{c:i,a:"LoadList",l:""},clickLoadMoreReply:{c:i,a:"TapLoadMoreReply",l:""},clickImage:{c:i,a:"TapImage",l:""},clickAvatar:{c:i,a:"TapAvatar",l:""},clickAuthorName:{c:i,a:"TapAuthorName",l:""},clickMention:{c:i,a:"TapMention",l:""},clickMemeUpload:{c:i,a:"TapMemeUpload",l:""},clickCommentAge:{c:i,a:"TapCommentTime",l:""},redirectLogin:{c:i,a:"RedirectLogin",l:""},clickFirstToComment:{c:i,a:"TapFirstToComment",l:""},clickFollowThread:{c:i,a:"TapFollowThread",l:""},clickUnfollowThread:{c:i,a:"TapUnfollowThread",l:""},clickCommentItem:{c:i,a:"TapCommentItem",l:""},clickCommentItemForReply:{c:i,a:"TapCommentItemForReply",l:""},closeCommentInput:{c:i,a:"CloseCommentInput",l:""},copyCommentLink:{c:i,a:"CopyCommentLink",l:""}};t.a=r},491:function(e,t,n){"use strict";n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return A})),n.d(t,"e",(function(){return L})),n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return U}));n(18),n(15),n(13),n(14),n(9),n(16);var i=n(0),r=n.n(i),o=n(2),u=n.n(o),s=(n(23),n(3)),a=n.n(s),d=n(7),c=n.n(d),l=n(8),f=n.n(l),m=n(44),h=n.n(m),p=n(21),v=n.n(p),g=n(45),b=n.n(g),y=n(50),_=n.n(y),S=n(104),I=n.n(S),O=n(197),w=n.n(O);n(86);function C(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){function e(){c()(this,e),this.options={},this.FILE_SIZE_LIMIT=10485760}var t,n,i,o,s,d,l,m,h,p,v,g,b,y,S,O,C;return f()(e,[{key:"init",value:function(e){this.options=k({},this.options,{},e)}},{key:"baseUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||this.options.version;return"https://".concat(this.options.host,"/").concat(t)}},{key:"baseCdnUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||this.options.version;return"https://".concat(this.options.cdnHost,"/").concat(t,"/cacheable")}},{key:"returnError",value:function(e){return Promise.reject(e.response?e.response.data:e)}},{key:"fetchFollowStatus",value:(C=a()(r.a.mark((function e(t){var n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.threadId,i={threadId:n},e.prev=3,e.next=6,_.a.post("/v1/follow-thread-status",i);case 6:return o=e.sent,e.abrupt("return",o.data.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",this.returnError(e.t0));case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return C.apply(this,arguments)})},{key:"updateFollowStatus",value:(O=a()(r.a.mark((function e(t){var n,i,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.threadId,i=t.follow,o={threadId:n,follow:i},e.prev=3,e.next=6,_.a.post("/v1/follow-thread",o);case 6:return u=e.sent,e.abrupt("return",u.data.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",this.returnError(e.t0));case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return O.apply(this,arguments)})},{key:"addComment",value:(S=a()(r.a.mark((function e(){var t,n,i,o,s,a,d,c,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},n="".concat(this.baseUrl(),"/comment.json"),(i=w()(k({},this.options,{},t),["appId","auth","url","text","parent","replyThreadOnly","userMedia","hash","delegateUserId"])).userMedia&&(i.userMedia=JSON.stringify([i.userMedia])),e.prev=4,e.next=7,_.a.post(n,I.a.stringify(i));case 7:return s=e.sent,a=s.data.payload,d=a.comment,c=a.quota,e.abrupt("return",(o={},u()(o,i.url,d),u()(o,"quota",c),o));case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",this.returnError(e.t0));case 15:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(){return S.apply(this,arguments)})},{key:"uploadMedia",value:(y=a()(r.a.mark((function e(t){var n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(this.baseUrl(),"/media.json"),/\/(gif|jpe?g|png|mp4|webm)$/i.test(t.type)){e.next=3;break}return e.abrupt("return",Promise.reject({code:"IMAGE_INVALID_TYPE"}));case 3:if(!(t.size&&t.size>this.FILE_SIZE_LIMIT)){e.next=5;break}return e.abrupt("return",Promise.reject({code:"IMAGE_INVALID_SIZE"}));case 5:return(i=new FormData).append("auth",this.options.auth),i.append("appId",this.options.appId),i.append("blob",t),e.prev=9,e.next=12,_.a.post(n,i);case 12:return o=e.sent,e.abrupt("return",o.data.payload.data);case 16:return e.prev=16,e.t0=e.catch(9),e.abrupt("return",this.returnError(e.t0));case 19:case"end":return e.stop()}}),e,this,[[9,16]])}))),function(e){return y.apply(this,arguments)})},{key:"updateLike",value:(b=a()(r.a.mark((function e(t){var n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/like.json"),i=w()(k({},this.options,{},t),["appId","auth","commentId","value"]),e.prev=2,e.next=5,_.a.post(n,I.a.stringify(i));case 5:return o=e.sent,e.abrupt("return",o.data.payload);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",this.returnError(e.t0));case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return b.apply(this,arguments)})},{key:"deleteComment",value:(g=a()(r.a.mark((function e(t){var n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/comment.json"),(i=w()(k({},this.options,{},t),["appId","auth","url"]))._method="DELETE",i.id=t.commentId,e.prev=4,e.next=7,_.a.post(n,I.a.stringify(i));case 7:return o=e.sent,e.abrupt("return",o.data.payload);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",this.returnError(e.t0));case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return g.apply(this,arguments)})},{key:"reportComment",value:(v=a()(r.a.mark((function e(t){var n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/report.json"),(i=w()(k({},this.options,{},t),["appId","auth","url","commentId","userReportData"])).userReportData=JSON.stringify(i.userReportData),e.prev=3,e.next=6,_.a.post(n,I.a.stringify(i));case 6:return o=e.sent,e.abrupt("return",o.data.payload);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",this.returnError(e.t0));case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return v.apply(this,arguments)})},{key:"opHideComment",value:(p=a()(r.a.mark((function e(t){var n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/op/hide"),i=w()(k({},this.options,{},t),["appId","url","auth","commentId"]),e.prev=2,e.next=5,_.a.post(n,I.a.stringify(i));case 5:return o=e.sent,e.abrupt("return",o.data.payload);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",this.returnError(e.t0));case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return p.apply(this,arguments)})},{key:"_adminAction",value:(h=a()(r.a.mark((function e(t,n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post(t,I.a.stringify(n));case 3:return i=e.sent,e.abrupt("return",i.data.payload);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",this.returnError(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t){return h.apply(this,arguments)})},{key:"ban",value:(m=a()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/admin/ban"),e.abrupt("return",this._banAction(n,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"unban",value:(l=a()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/admin/unban"),e.abrupt("return",this._banAction(n,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"_banAction",value:(d=a()(r.a.mark((function e(t,n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w()(k({},this.options,{},n),["appId","userId","auth"]),e.abrupt("return",this._adminAction(t,i));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"hide",value:(s=a()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/admin/hide"),e.abrupt("return",this._hideAction(n,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"unhide",value:(o=a()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/admin/unhide"),e.abrupt("return",this._hideAction(n,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_hideAction",value:(i=a()(r.a.mark((function e(t,n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w()(k({},this.options,{},n),["appId","commentId","url","badImage","auth"]),e.abrupt("return",this._adminAction(t,i));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"updatePost",value:(n=a()(r.a.mark((function e(t){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/admin/update"),i=w()(k({},this.options,{},t),["appId","url","auth","lock","status"]),e.abrupt("return",this._adminAction(n,i));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"pinComment",value:(t=a()(r.a.mark((function e(t){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl(),"/admin/pin"),i=w()(k({},this.options,{},t),["appId","url","auth","commentId","pinned"]),e.abrupt("return",this._adminAction(n,i));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),P=n(96);function E(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j="score",A="ts",L="userMedia",x="STATIC",U="ANIMATED",D=function(e){function t(){var e;return c()(this,t),(e=h()(this,v()(t).call(this))).options={version:"v1",order:j,count:10,direction:"desc"},e}var n;return b()(t,e),f()(t,[{key:"fetchComments",value:(n=a()(r.a.mark((function e(){var t,n,i,o,s,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=w()(M({},this.options,{},t),["appId","url","count","level","order","refCommentId","ref"]),this.options.highlightedId&&(n.commentId=this.options.highlightedId),e.prev=3,i="comment-list.json",t.useCDN?(n.origin=window.location.origin,P.a.isBot()&&(n.ts="".concat(P.a.getRangeId())),o=_.a.get("".concat(this.baseCdnUrl(),"/").concat(i),{params:n})):(n.auth=this.options.auth,o=_.a.post("".concat(this.baseUrl(),"/").concat(i),I.a.stringify(n))),e.next=8,o;case 8:return s=e.sent,e.abrupt("return",u()({},n.url,s.data.payload));case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",this.returnError(e.t0));case 15:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(){return n.apply(this,arguments)})}]),t}(T);t.f=new D},492:function(e,t,n){"use strict";n(18),n(15),n(13),n(14),n(9),n(16);var i=n(2),r=n.n(i),o=n(4),u=n(488),s=n(489),a=n(61);function d(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}var c=Object(o.a)("commentSystem/user").mapGetters,l=Object(o.a)("commentSystem/comment").mapState;t.a={mixins:[a.a],computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c({_isLoggedIn:"isLoggedIn"}),{},l({postUrl:"url"})),methods:{redirectLogin:function(){if(!this._isLoggedIn)return u.a.track(s.a.redirectLogin),this.loginCallback(),!0},loginCallback:function(){var e="".concat(this.postUrl,"#comment");this.ensureLoggedIn(e)}}}},494:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return P}));var i=n(524),r=n(525),o=n(526),u=n.n(o),s=n(19),a={itemsLimit:1e3};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,o=!0,u=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){u=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw r}}}}var p={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(e){return["vertical","horizontal"].includes(e)}}};function v(){return this.items.length&&"object"!==d(this.items[0])}var g=!1;if("undefined"!=typeof window){g=!1;try{var b=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("test",null,b)}catch(e){}}var y=0;function _(e,t,n,i,r,o,u,s,a,d){"boolean"!=typeof u&&(a=s,s=u,u=!1);const c="function"==typeof n?n.options:n;let l;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,r&&(c.functional=!0)),i&&(c._scopeId=i),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):t&&(l=u?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),l)if(c.functional){const e=c.render;c.render=function(t,n){return l.call(n),e(t,n)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,l):[l]}return n}const S={name:"RecycleScroller",components:{ResizeObserver:i.a},directives:{ObserveVisibility:r.a},props:f({},p,{itemSize:{type:Number,default:null},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1}}),data:function(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes:function(){if(null===this.itemSize){for(var e,t={"-1":{accumulator:0}},n=this.items,i=this.sizeField,r=this.minItemSize,o=1e4,u=0,s=0,a=n.length;s<a;s++)(e=n[s][i]||r)<o&&(o=e),u+=e,t[s]={accumulator:u,size:e};return this.$_computedMinItemSize=o,t}return[]},simpleArray:v},watch:{items:function(){this.updateVisibleItems(!0)},pageMode:function(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler:function(){this.updateVisibleItems(!1)},deep:!0}},created:function(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1))},mounted:function(){var e=this;this.applyPageMode(),this.$nextTick((function(){e.$_prerender=!1,e.updateVisibleItems(!0),e.ready=!0}))},beforeDestroy:function(){this.removeListeners()},methods:{addView:function(e,t,n,i,r){var o={item:n,position:0},u={id:y++,index:t,used:!0,key:i,type:r};return Object.defineProperty(o,"nr",{configurable:!1,value:u}),e.push(o),o},unuseView:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.$_unusedViews,i=e.nr.type,r=n.get(i);r||(r=[],n.set(i,r)),r.push(e),t||(e.nr.used=!1,e.position=-9999,this.$_views.delete(e.nr.key))},handleResize:function(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll:function(e){var t=this;this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame((function(){t.$_scrollDirty=!1,t.updateVisibleItems(!1,!0).continuous||(clearTimeout(t.$_refreshTimout),t.$_refreshTimout=setTimeout(t.handleScroll,100))})))},handleVisibilityChange:function(e,t){var n=this;this.ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height?(this.$emit("visible"),requestAnimationFrame((function(){n.updateVisibleItems(!1)}))):this.$emit("hidden"))},updateVisibleItems:function(e){var t,n,i,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=this.itemSize,s=this.$_computedMinItemSize,d=this.typeField,c=this.simpleArray?null:this.keyField,l=this.items,f=l.length,m=this.sizes,h=this.$_views,p=this.$_unusedViews,v=this.pool;if(f)if(this.$_prerender)t=0,n=this.prerender,i=null;else{var g=this.getScroll();if(o){var b=g.start-this.$_lastUpdateScrollPosition;if(b<0&&(b=-b),null===u&&b<s||b<u)return{continuous:!0}}this.$_lastUpdateScrollPosition=g.start;var y=this.buffer;if(g.start-=y,g.end+=y,null===u){var _,S=0,I=f-1,O=~~(f/2);do{_=O,m[O].accumulator<g.start?S=O:O<f-1&&m[O+1].accumulator>g.start&&(I=O),O=~~((S+I)/2)}while(O!==_);for(O<0&&(O=0),t=O,i=m[f-1].accumulator,n=O;n<f&&m[n].accumulator<g.end;n++);-1===n?n=l.length-1:++n>f&&(n=f)}else(t=~~(g.start/u))<0&&(t=0),(n=Math.ceil(g.end/u))>f&&(n=f),i=f*u}else t=n=i=0;n-t>a.itemsLimit&&this.itemsLimitError(),this.totalSize=i;var w=t<=this.$_endIndex&&n>=this.$_startIndex;if(this.$_continuous!==w){if(w){h.clear(),p.clear();for(var C=0,k=v.length;C<k;C++)r=v[C],this.unuseView(r)}this.$_continuous=w}else if(w)for(var T=0,P=v.length;T<P;T++)(r=v[T]).nr.used&&(e&&(r.nr.index=l.findIndex((function(e){return c?e[c]===r.item[c]:e===r.item}))),(-1===r.nr.index||r.nr.index<t||r.nr.index>=n)&&this.unuseView(r));for(var E,M,j,A,L=w?null:new Map,x=t;x<n;x++){E=l[x];var U=c?E[c]:E;if(null==U)throw new Error("Key is ".concat(U," on item (keyField is '").concat(c,"')"));r=h.get(U),u||m[x].size?(r?(r.nr.used=!0,r.item=E):(M=E[d],j=p.get(M),w?j&&j.length?((r=j.pop()).item=E,r.nr.used=!0,r.nr.index=x,r.nr.key=U,r.nr.type=M):r=this.addView(v,x,E,U,M):(A=L.get(M)||0,(!j||A>=j.length)&&(r=this.addView(v,x,E,U,M),this.unuseView(r,!0),j=p.get(M)),(r=j[A]).item=E,r.nr.used=!0,r.nr.index=x,r.nr.key=U,r.nr.type=M,L.set(M,A+1),A++),h.set(U,r)),r.position=null===u?m[x-1].accumulator:x*u):r&&this.unuseView(r)}return this.$_startIndex=t,this.$_endIndex=n,this.emitUpdate&&this.$emit("update",t,n),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,300),{continuous:w}},getListenerTarget:function(){var e=u()(this.$el);return!window.document||e!==window.document.documentElement&&e!==window.document.body||(e=window),e},getScroll:function(){var e,t=this.$el,n="vertical"===this.direction;if(this.pageMode){var i=t.getBoundingClientRect(),r=n?i.height:i.width,o=-(n?i.top:i.left),u=n?window.innerHeight:window.innerWidth;o<0&&(u+=o,o=0),o+u>r&&(u=r-o),e={start:o,end:o+u}}else e=n?{start:t.scrollTop,end:t.scrollTop+t.clientHeight}:{start:t.scrollLeft,end:t.scrollLeft+t.clientWidth};return e},applyPageMode:function(){this.pageMode?this.addListeners():this.removeListeners()},addListeners:function(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,!!g&&{passive:!0}),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners:function(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem:function(e){var t;t=null===this.itemSize?e>0?this.sizes[e-1].accumulator:0:e*this.itemSize,this.scrollToPosition(t)},scrollToPosition:function(e){"vertical"===this.direction?this.$el.scrollTop=e:this.$el.scrollLeft=e},itemsLimitError:function(){var e=this;throw setTimeout((function(){console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",e.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")})),new Error("Rendered items limit reached")},sortViews:function(){this.pool.sort((function(e,t){return e.nr.index-t.nr.index}))}}};var I=function(){var e,t,n=this,i=n.$createElement,r=n._self._c||i;return r("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:n.handleVisibilityChange,expression:"handleVisibilityChange"}],staticClass:"vue-recycle-scroller",class:(e={ready:n.ready,"page-mode":n.pageMode},e["direction-"+n.direction]=!0,e),on:{"&scroll":function(e){return n.handleScroll(e)}}},[n.$slots.before?r("div",{staticClass:"vue-recycle-scroller__slot"},[n._t("before")],2):n._e(),n._v(" "),r("div",{ref:"wrapper",staticClass:"vue-recycle-scroller__item-wrapper",style:(t={},t["vertical"===n.direction?"minHeight":"minWidth"]=n.totalSize+"px",t)},n._l(n.pool,(function(e){return r("div",{key:e.nr.id,staticClass:"vue-recycle-scroller__item-view",class:{hover:n.hoverKey===e.nr.key},style:n.ready?{transform:"translate"+("vertical"===n.direction?"Y":"X")+"("+e.position+"px)"}:null,on:{mouseenter:function(t){n.hoverKey=e.nr.key},mouseleave:function(e){n.hoverKey=null}}},[n._t("default",null,{item:e.item,index:e.nr.index,active:e.nr.used})],2)})),0),n._v(" "),n.$slots.after?r("div",{staticClass:"vue-recycle-scroller__slot"},[n._t("after")],2):n._e(),n._v(" "),r("ResizeObserver",{on:{notify:n.handleResize}})],1)};I._withStripped=!0;const O=_({render:I,staticRenderFns:[]},void 0,S,void 0,!1,void 0,!1,void 0,void 0,void 0);const w={name:"DynamicScroller",components:{RecycleScroller:O},inheritAttrs:!1,provide:function(){return"undefined"!=typeof ResizeObserver&&(this.$_resizeObserver=new ResizeObserver((function(e){var t,n=h(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.target){var r=new CustomEvent("resize",{detail:{contentRect:i.contentRect}});i.target.dispatchEvent(r)}}}catch(e){n.e(e)}finally{n.f()}}))),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},props:f({},p,{minItemSize:{type:[Number,String],required:!0}}),data:function(){return{vscrollData:{active:!0,sizes:{},validSizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:v,itemsWithSize:function(){for(var e=[],t=this.items,n=this.keyField,i=this.simpleArray,r=this.vscrollData.sizes,o=0;o<t.length;o++){var u=t[o],s=i?o:u[n],a=r[s];void 0!==a||this.$_undefinedMap[s]||(a=0),e.push({item:u,id:s,size:a})}return e},listeners:function(){var e={};for(var t in this.$listeners)"resize"!==t&&"visible"!==t&&(e[t]=this.$listeners[t]);return e}},watch:{items:function(){this.forceUpdate(!1)},simpleArray:{handler:function(e){this.vscrollData.simpleArray=e},immediate:!0},direction:function(e){this.forceUpdate(!0)}},created:function(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={}},activated:function(){this.vscrollData.active=!0},deactivated:function(){this.vscrollData.active=!1},methods:{onScrollerResize:function(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible:function(){this.$emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(e||this.simpleArray)&&(this.vscrollData.validSizes={}),this.$emit("vscroll:update",{force:!0})},scrollToItem:function(e){var t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.simpleArray?null!=t?t:this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[n]||0},scrollToBottom:function(){var e=this;if(!this.$_scrollingToBottom){this.$_scrollingToBottom=!0;var t=this.$el;this.$nextTick((function(){t.scrollTop=t.scrollHeight+5e3;requestAnimationFrame((function n(){t.scrollTop=t.scrollHeight+5e3,requestAnimationFrame((function(){t.scrollTop=t.scrollHeight+5e3,0===e.$_undefinedSizes?e.$_scrollingToBottom=!1:requestAnimationFrame(n)}))}))}))}}}};var C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("RecycleScroller",e._g(e._b({ref:"scroller",attrs:{items:e.itemsWithSize,"min-item-size":e.minItemSize,direction:e.direction,"key-field":"id"},on:{resize:e.onScrollerResize,visible:e.onScrollerVisible},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item,i=t.index,r=t.active;return[e._t("default",null,null,{item:n.item,index:i,active:r,itemWithSize:n})]}}],null,!0)},"RecycleScroller",e.$attrs,!1),e.listeners),[e._v(" "),n("template",{slot:"before"},[e._t("before")],2),e._v(" "),n("template",{slot:"after"},[e._t("after")],2)],2)};C._withStripped=!0;const k=_({render:C,staticRenderFns:[]},void 0,w,void 0,!1,void 0,!1,void 0,void 0,void 0);const T=_({},void 0,{name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},computed:{id:function(){return this.vscrollData.simpleArray?this.index:this.item[this.vscrollData.keyField]},size:function(){return this.vscrollData.validSizes[this.id]&&this.vscrollData.sizes[this.id]||0},finalActive:function(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id:function(){this.size||this.onDataUpdate()},finalActive:function(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created:function(){var e=this;if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){var t=function(t){e.$watch((function(){return e.sizeDependencies[t]}),e.onDataUpdate)};for(var n in this.sizeDependencies)t(n);this.vscrollParent.$on("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$on("vscroll:update-size",this.onVscrollUpdateSize)}},mounted:function(){this.vscrollData.active&&(this.updateSize(),this.observeSize())},beforeDestroy:function(){this.vscrollParent.$off("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$off("vscroll:update-size",this.onVscrollUpdateSize),this.unobserveSize()},methods:{updateSize:function(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData:function(){var e=this;this.watchData?this.$_watchData=this.$watch("data",(function(){e.onDataUpdate()}),{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate:function(e){var t=e.force;!this.finalActive&&t&&(this.$_pendingVScrollUpdate=this.id),this.$_forceNextVScrollUpdate!==this.id&&!t&&this.size||this.updateSize()},onDataUpdate:function(){this.updateSize()},computeSize:function(e){var t=this;this.$nextTick((function(){if(t.id===e){var n=t.$el.offsetWidth,i=t.$el.offsetHeight;t.applySize(n,i)}t.$_pendingSizeUpdate=null}))},applySize:function(e,t){var n=Math.round("vertical"===this.vscrollParent.direction?t:e);n&&this.size!==n&&(this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.$set(this.vscrollData.sizes,this.id,n),this.$set(this.vscrollData.validSizes,this.id,!0),this.emitResize&&this.$emit("resize",this.id))},observeSize:function(){this.vscrollResizeObserver&&(this.vscrollResizeObserver.observe(this.$el.parentNode),this.$el.parentNode.addEventListener("resize",this.onResize))},unobserveSize:function(){this.vscrollResizeObserver&&(this.vscrollResizeObserver.unobserve(this.$el.parentNode),this.$el.parentNode.removeEventListener("resize",this.onResize))},onResize:function(e){var t=e.detail.contentRect,n=t.width,i=t.height;this.applySize(n,i)}},render:function(e){return e(this.tag,this.$slots.default)}},void 0,void 0,void 0,!1,void 0,void 0,void 0);function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.idProp,n=void 0===t?function(e){return e.item.id}:t,i={},r=new s.a({data:function(){return{store:i}}});return{data:function(){return{idState:null}},created:function(){var e=this;this.$_id=null,this.$_getId="function"==typeof n?function(){return n.call(e,e)}:function(){return e[n]},this.$watch(this.$_getId,{handler:function(e){var t=this;this.$nextTick((function(){t.$_id=e}))},immediate:!0}),this.$_updateIdState()},beforeUpdate:function(){this.$_updateIdState()},methods:{$_idStateInit:function(e){var t=this.$options.idState;if("function"==typeof t){var n=t.call(this,this);return r.$set(i,e,n),this.$_id=e,n}throw new Error("[mixin IdState] Missing `idState` function on component definition.")},$_updateIdState:function(){var e=this.$_getId();null==e&&console.warn("No id found for IdState with idProp: '".concat(n,"'.")),e!==this.$_id&&(i[e]||this.$_idStateInit(e),this.idState=i[e])}}}}var E={version:"1.0.10",install:function(e,t){var n=Object.assign({},{installComponents:!0,componentsPrefix:""},t);for(var i in n)void 0!==n[i]&&(a[i]=n[i]);n.installComponents&&function(e,t){e.component("".concat(t,"recycle-scroller"),O),e.component("".concat(t,"RecycleScroller"),O),e.component("".concat(t,"dynamic-scroller"),k),e.component("".concat(t,"DynamicScroller"),k),e.component("".concat(t,"dynamic-scroller-item"),T),e.component("".concat(t,"DynamicScrollerItem"),T)}(e,n.componentsPrefix)}},M=null;"undefined"!=typeof window?M=window.Vue:void 0!==e&&(M=e.Vue),M&&M.use(E)}).call(this,n(63))},496:function(e,t,n){"use strict";(function(e){n(18),n(15),n(16),n(86),n(13),n(14),n(9),n(230);var i=n(2),r=n.n(i),o=n(582),u=n(522),s=n(585),a=n(491),d=n(502),c=n(29),l=n(4),f=n(587),m=n(104),h=n.n(m);function p(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=Object(l.a)("commentSystem/comment"),b=g.mapState,y=g.mapMutations,_=g.mapActions,S=Object(l.a)("commentSystem/app").mapActions,I=Object(l.a)("commentSystem/user").mapActions;t.a={props:{post:Object,commentAuth:String,commentOptions:Object,reportPromise:Function,showTotal:{type:Boolean,default:!1}},components:{TabBarOrderView:o.a,CommentInputView:u.a,CommentListView:s.a},watch:{postId:function(){this.init()},commentAuth:function(){this.init()}},methods:v({},y({setHighlightedId:"SET_HIGHLIGHTED_ID",setCommentInfo:"SET_COMMENT_INFO"}),{},_({fetchComments:"FETCH_COMMENTS"}),{},S({fetchAppInfo:c.a.FETCH_APP_INFO}),{},I({fetchUserInfo:c.b.FETCH_USER_INFO}),{init:function(){var t=this;if(this.postId){var n=v({},this.initOptions);if(location.hash){var i,r=h.a.parse(location.hash.substr(1));r.cs_comment_id&&(i=r.cs_comment_id,this.setHighlightedId(i),n.highlightedId=i)}e.log("CommentSystem.init",n),d.a.init(n),a.f.init(n),this.setCommentInfo(n);var o=this.fetchAppInfo(n),u=this.fetchUserInfo(n);Promise.all([o,u]).then((function(){t.fetchComments({refresh:!0})}))}}}),computed:v({},b(["commentsCount","lock"]),{postId:function(){return this.post&&this.post.id||null},initOptions:function(){return v({},this.commentOptions,{url:this.post.url,postKey:this.post.id,auth:this.commentAuth,reportPromise:this.reportPromise})}}),created:function(){this.$store.state.commentSystem||(this.$store.registerModule("commentSystem",Object(f.b)()),Object(f.a)(this.$store)),this.init()}}}).call(this,n(17).default)},497:function(e,t,n){"use strict";(function(e,i){n(18),n(15),n(13),n(14),n(16),n(86),n(9),n(103);var r=n(2),o=n.n(r),u=n(4),s=n(491),a=n(488),d=n(489),c=n(492),l=n(29),f=n(494);function m(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=Object(u.a)("commentSystem/app").mapState,v=Object(u.a)("commentSystem/user"),g=v.mapState,b=v.mapGetters,y=Object(u.a)("commentSystem/comment"),_=y.mapState,S=y.mapActions,I=y.mapGetters,O=Object(u.a)("toast").mapActions;t.a={data:function(){return{loading:!1,errorMessage:null,isReactionMode:!1,uploading:!1,delegateUserId:null}},idState:function(){return{commentText:"",media:!1}},mixins:[c.a,Object(f.c)({idProp:function(e){return e.idStateKey}})],props:{idStateKey:String,isReply:Boolean,replyBoxCommentId:String,threadId:String,replyMentionUser:Object,hideReplyBox:Function},computed:h({},b(["canModerate"]),{},I(["isLocked","shouldAutoFollowThread"]),{},_(["lock"]),{},p({appInfo:"info"}),{},g({userInfo:"info"}),{commentText:function(){return this.idState.commentText},media:function(){return this.idState.media},remainingCharactersLimit:function(){return this.appInfo.maxMessageLength-this.commentText.length},messageLengthExceeded:function(){return this.remainingCharactersLimit<0},profileUrl:function(){return this.delegateUser&&this.delegateUser.profileUrl||this.userInfo.profileUrl||"javascript:void(0)"},avatarUrl:function(){return this.delegateUser&&this.delegateUser.avatarUrl||this.userInfo.avatarUrl||this.appInfo.anonymousAvatarUrl},canPostComment:function(){return!this.loading&&(this.commentText.trim()||this.media)&&!this.messageLengthExceeded},canShowReactionButton:function(){return!this.isReactionMode&&this.appInfo.allowPostUrlComment&&this.appInfo.reactionImageSite},canShowImageUploadButton:function(){return!this.isReactionMode&&this.appInfo.allowImageUploadFeature},canShowUploadImageView:function(){return this.uploading||this.media},uploadedMediaUrl:function(){return this.media&&this.media.imageMetaByType.image.url},mentionUser:function(){return this.isReply&&this.replyMentionUser?"@".concat(this.replyMentionUser.displayName):""},canShowDelegate:function(){return this.canModerate&&this.userInfo.delegates.length>0},delegateUser:function(){var e=this;return this.delegateUserId?this.userInfo.delegates.find((function(t){return t.userId===e.delegateUserId})):null},canShowInput:function(){return null!==this.lock&&!this.isLocked},canDismiss:function(){return this.isReply}}),methods:h({},S({addComment:"ADD_COMMENT",animateHighlightComment:"ANIMATE_HIGHLIGHT_COMMENT",updateFollowStatus:"UPDATE_FOLLOW_STATUS"}),{},O({displayToast:l.d.DISPLAY_TOAST}),{clearAllInput:function(){this.idState.commentText="",this.loading=!1,this.idState.media=null,this.isReactionMode=!1},enterComment:function(e){(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.postComment())},postComment:function(){var t=this;if(!this.redirectLogin()&&this.canPostComment){var n={text:this.commentText};this.delegateUserId&&(n.delegateUserId=this.delegateUserId),this.media&&(n.userMedia=this.media.sourceMeta,n.hash=this.media.hash),this.isReply&&(n.parent=this.replyBoxCommentId),this.loading=!0;var i=this.threadId;this.addComment(n).then((function(e){t.errorMessage="",t.clearAllInput();var r="";n.parent?(t.shouldAutoFollowThread(i)&&t.followThreadByReply(i),r=d.a.replyComment):r=d.a.addComment,a.a.track(r),t.canDismiss&&t.dismiss(),e&&t.scrollToComment(e)})).catch((function(n){t.errorMessage=e.getCommentErrorMessage(n),t.loading=!1}))}},showFollowThreadToast:function(){var e=this;return new Promise((function(t,n){e.displayToast({type:i.INFO,msg:"You will be notified where there are new replies to this comment.",linkTitle:"Unfollow",toastAction:function(){return t(!1)},dismiss:!0}),setTimeout((function(){return t(!0)}),7e3)}))},followThreadByReply:function(e){var t=this;this.updateFollowStatus({threadId:e,follow:!0}),a.a.track(d.a.followThreadByReply),this.showFollowThreadToast().then((function(n){n||t.unfollowThreadByReply(e)}))},unfollowThreadByReply:function(e){this.updateFollowStatus({threadId:e,follow:!1}),a.a.track(d.a.unfollowThreadByReply),this.displayToast({type:i.INFO,msg:"Comment unfollowed.",dismiss:!0})},toggleReactionMode:function(e){if(this.redirectLogin())return e.preventDefault(),void e.stopPropagation();a.a.track(d.a.clickMemeUpload),this.isReactionMode=!this.isReactionMode,this.idState.media=null,this.idState.commentText=""},showFileInputBox:function(){this.redirectLogin()||this.$refs.imageFileInput.click()},uploadImage:function(t){var n=this,i=(t.target||t.srcElement).files[0];this.uploading=!0,s.f.uploadMedia(i).then((function(e){n.idState.media=e,n.uploading=!1,n.$refs.imageFileInput.value=null})).catch((function(t){n.idState.media=null,n.errorMessage=e.getCommentErrorMessage(t),n.uploading=!1,n.$refs.imageFileInput.value=null}))},focusInput:function(){this.$refs.commentInput.focus()},changeDelegate:function(e){var t=e.srcElement||e.target,n=t.selectedIndex;this.delegateUserId=t[n].value},focusPostTextarea:function(){a.a.track(d.a.writeComment)},clickCancel:function(){this.clearAllInput(),this.canDismiss&&this.dismiss(),this.canDismiss&&a.a.track(d.a.closeCommentInput)},dismiss:function(){this.$emit("dismiss")},scrollToComment:function(e){var t=this;this.$nextTick((function(){var n=document.getElementById(e);n&&(n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),t.animateHighlightComment(e))}))}}),mounted:function(){this.isReply&&!this.commentText.length&&(this.idState.commentText="".concat(this.mentionUser," "),this.focusInput())}}}).call(this,n(55).default,n(115).default)},498:function(e,t,n){"use strict";(function(e,i){n(18),n(15),n(13),n(14),n(9),n(16);var r=n(2),o=n.n(r),u=n(586),s=n(4),a=n(488),d=n(489),c=n(492),l=n(265),f=n(494);function m(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=Object(s.a)("commentSystem/comment"),v=p.mapState,g=p.mapActions,b=p.mapMutations,y=p.mapGetters,_=Object(s.a)("commentSystem/app").mapState;t.a={props:["isSection"],mixins:[c.a],watch:{hasHighlightedComment:{handler:function(e){var t=this;e&&this.$nextTick((function(){t.animateHighlightComment(t.highlightedId)}))},immediate:!0},order:function(){this.resetLoadMore()}},computed:h({},v(["highlightedId","comments","hasNext","isLoading","order","autoLoadCount","commentsCount"]),{},y(["isLocked"]),{},_({appInfo:"info"}),{showNoCommentText:function(){return!(this.isLocked||this.comments.length||this.isLoading||this.isSection)},canLoadMore:function(){return this.hasNext&&!this.isLoading&&!this.isSection},canScrollMore:function(){var e=this.appInfo.autoLoadMaxTimes,t=-1===e;return this.canLoadMore&&(t||this.autoLoadCount<e)},canShowLoading:function(){return!this.isSection&&this.isLoading},useScroller:function(){return!this.isSection&&this.commentsCount>10},getComments:function(){return this.isSection?this.comments.filter((function(e){return""!==e.section})):this.comments.filter((function(e){return""===e.section}))},hasHighlightedComment:function(){return this.isSection&&this.getComments.filter((function(e){return"highlight"===e.section})).length>0}}),components:{CommentItemView:u.a,LoadMore:l.a,DynamicScroller:f.a,DynamicScrollerItem:f.b},methods:h({},b({increaseAutoLoadCount:"INCREASE_AUTO_LOAD_COUNT"}),{},g({fetchComments:"FETCH_COMMENTS",animateHighlightComment:"ANIMATE_HIGHLIGHT_COMMENT"}),{getWinHeight:function(){return e.getWinHeight()},fetchMoreComments:function(e){var t=this,n=this.comments[this.comments.length-1];this.fetchComments({ref:n.orderKey,order:this.order}).then((function(n){a.a.track(d.a.loadMore,{CommentCount:t.comments.length,TriggerAction:e})}))},loadMoreHandler:function(){i.log("scroll triggered load more comments"),this.increaseAutoLoadCount(),this.fetchMoreComments("Scroll")},resetLoadMore:function(){this.$refs.loadMore&&this.$refs.loadMore.reset()},firstToComment:function(){this.redirectLogin()||(document.getElementsByClassName("post-text-area")[0].focus(),a.a.track(d.a.clickFirstToComment))}})}}).call(this,n(38).default,n(17).default)},499:function(e,t,n){"use strict";(function(e,i,r){n(18),n(15),n(13),n(14),n(9),n(16),n(336);var o=n(2),u=n.n(o),s=n(4),a=n(583),d=n(522),c=n(584),l=n(588),f=n(494),m=n(491),h=n(488),p=n(489),v=n(528),g=n(529),b=n.n(g),y=n(492);function _(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=Object(s.a)("commentSystem/app").mapState,O=Object(s.a)("commentSystem/comment"),w=O.mapState,C=O.mapActions,k=O.mapGetters,T=(O.mapMutations,Object(s.a)("commentSystem/user")),P=T.mapState,E=T.mapGetters;t.a={name:"CommentItemView",props:["comment","scroller"],data:function(){return{TYPE_USER_MEDIA:m.e,hidden:!1,banned:!1,pinned:null}},mixins:[y.a,Object(f.c)({idProp:function(e){return e.comment.commentId}})],idState:function(){return{defaultHideReplies:!0,isLoadingReplies:!1,gifVideoObserver:null,replyBox:!1,hover:!1,active:!1}},components:{CommentItemVoteBtnView:a.a,CommentInputView:d.a,CommentItemExtraMenuView:c.a,CommentItemCommentText:l.a},mounted:function(){this.loadTwemoji(),this.lazyLoadGifVideo()},computed:S({},I({appInfo:"info"}),{},k(["isLocked"]),{},w(["opUserId","cdnHost","replyBoxCommentId","animateHighlightId"]),{},P({userInfo:"info"}),{},E(["canModerate","isLoggedIn"]),{commentEntryClasses:function(){return{"indent-1":this.isChild,"comment-highlight":this.idState.hover,"comment-highlight-active":this.idState.hover&&this.idState.active,"comment-animate-highlight":this.animateHighlightId===this.comment.commentId}},loadMoreBtnClasses:function(){return{loading:this.idState.isLoadingReplies,"comment-highlight":this.highlightViewRepliesBtn&&this.idState.hover,"comment-highlight-active":this.highlightViewRepliesBtn&&this.idState.hover&&this.idState.active}},highlightViewRepliesBtn:function(){return this.hideReplies&&!this.idState.replyBox&&!this.idState.isLoadingReplies},emojiStatus:function(){return this.comment.user.emojiStatus||""},profileUrl:function(){return this.comment.user.profileUrl||""},isVerifiedAccount:function(){return!!this.comment.user.isVerifiedAccount},commentId:function(){return this.comment.commentId},hideProBadge:function(){var e=this.comment.user.preferences;return!!e&&!!e.hideProBadge},isPro:function(){return this.comment.user.isActivePro},isProPlus:function(){return this.comment.user.isActiveProPlus},isOp:function(){return this.comment.user.userId===this.opUserId},isAuthor:function(){return this.isLoggedIn&&e.endsWith(this.comment.user.userId,this.userInfo.userId)},commentAge:function(){return i.getTimeAgo(this.comment.timestamp)},pointsText:function(){return this.comment.isVoteMasked&&!this.isAuthor?"Points hidden":this.points},points:function(){var e=this.comment.likeCount;if(e<=0)return"";var t=e>1?"points":"point";return"".concat(e," ").concat(t)},isChild:function(){return this.comment.level>1},hasReplies:function(){return!this.comment.isChild&&(1===this.comment.childrenTotal&&this.hideReplies||this.comment.hasNext)},lastChild:function(){var e=this.getChildren.length-1;return this.comment.children[e]},imageInfo:function(){var e=this.comment,t="",n=null,i="",r=!1;if(e.type===m.e&&e.media.length>0){var o=e.media[0].imageMetaByType;o.type===m.a&&o.video?(t=o.video.url,r=!0):o.type===m.b&&o.image&&(t=o.image.url,n=o.image.webpUrl),i="https://".concat(this.cdnHost,"/image?ref=").concat(this.appInfo.refDomain,"#").concat(t)}return{imageUrl:t,imageHref:i,webpUrl:n,videoUrl:null,isVideo:r}},getChildren:function(){return this.comment.children.filter((function(e){return!e.isLocal}))},getLocalChildren:function(){return this.comment.children.filter((function(e){return e.isLocal}))},isPinned:function(){return null!==this.pinned?this.pinned:this.comment.isPinned},loadReplyText:function(){if(this.hideReplies){var e="replies";return 1===this.comment.childrenTotal&&(e="reply"),"View ".concat(this.comment.childrenTotal," ").concat(e)}return"Load more replies"},hideReplies:function(){return this.idState.defaultHideReplies&&!this.comment.section}}),methods:S({},C({_fetchMoreReplies:"FETCH_MORE_REPLIES",fetchFollowStatus:"FETCH_FOLLOW_STATUS"}),{fetchMoreReplies:function(){var e=this;this.resetMouseStates(),1===this.comment.childrenTotal&&this.hideReplies?this.idState.defaultHideReplies=!1:this.idState.isLoadingReplies||(this.idState.isLoadingReplies=!0,this._fetchMoreReplies({refCommentId:this.lastChild?this.lastChild.commentId:this.comment.commentId}).then((function(){h.a.track(p.a.clickLoadMoreReply,{ReplyCount:e.comment.children.length}),e.idState.isLoadingReplies=!1,e.idState.defaultHideReplies=!1})).catch((function(){e.idState.isLoadingReplies=!1})))},onReplyClick:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.resetMouseStates(),this.redirectLogin()||(e?h.a.track(p.a.clickCommentItemForReply):h.a.track(p.a.clickReply,{CommentId:this.comment.commentId,CommentLevel:this.comment.level}),this.showReplyBox())},_hide:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={commentId:this.comment.commentId,badImage:e?1:0};this.hidden?m.f.unhide(t):m.f.hide(t),this.hidden=!this.hidden},hide:function(){this._hide()},hideBadImage:function(){this._hide(!0)},ban:function(){var e={userId:this.comment.user.userId};confirm("Admin: Confirm ".concat(this.banned?"unban":"ban"," ").concat(this.comment.user.displayName,"?"))&&(this.banned?m.f.unban(e):m.f.ban(e),this.banned=!this.banned)},pin:function(){var e=!this.isPinned,t={commentId:this.comment.commentId,pinned:e?1:0};confirm("Admin: Confirm ".concat(e?"pin":"unpin"," comment?"))&&(m.f.pinComment(t),this.pinned=e)},clickAvatar:function(){h.a.track(p.a.clickAvatar,{CommentId:this.comment.commentId,CommentLevel:this.comment.level,UserId:this.comment.user.userId,AccountId:this.comment.user.accountId})},clickName:function(){h.a.track(p.a.clickAuthorName,{CommentId:this.comment.commentId,CommentLevel:this.comment.level,UserId:this.comment.user.userId,AccountId:this.comment.user.accountId})},clickAge:function(){h.a.track(p.a.clickCommentAge,{CommentId:this.comment.commentId,CommentLevel:this.comment.level})},clickImage:function(){h.a.track(p.a.clickImage,{CommentId:this.comment.commentId,CommentLevel:this.comment.level})},resetGifVideoObserver:function(){this.idState.gifVideoObserver&&(this.idState.gifVideoObserver.observer.disconnect(),this.idState.gifVideoObserver=null)},lazyLoadGifVideo:function(){this.resetGifVideoObserver(),this.$refs.gifVideo&&(this.idState.gifVideoObserver=b()(this.$refs.gifVideo),this.idState.gifVideoObserver.observe())},loadTwemoji:function(){this.$refs.emojiStatus&&v.a.parse(this.$refs.emojiStatus)},setMouseStates:function(e,t){this.idState[e]=t},resetMouseStates:function(){this.idState.hover=!1,this.idState.active=!1},viewRepliesMouseHandler:function(e,t){t?this.highlightViewRepliesBtn&&this.setMouseStates(e,!0):this.setMouseStates(e,!1)},showReplyBox:function(){this.idState.replyBox=!0,this.fetchFollowStatus(this.comment.threadId)},hideReplyBox:function(){this.idState.replyBox=!1},onItemClick:function(){window.getSelection()&&!window.getSelection().isCollapsed||this.$refs.extraMenu.showMenu||this.idState.replyBox||(this.isChild?this.onReplyClick(!0):this.hideReplies&&this.comment.childrenTotal>0?(this.fetchMoreReplies(),h.a.track(p.a.clickCommentItem)):this.onReplyClick(!0))}}),watch:{commentId:function(){var e=this;this.$nextTick((function(){e.loadTwemoji(),e.lazyLoadGifVideo()}))},"idState.isLoadingReplies":function(e,t){var n=this;this.scroller&&(!t&&e&&(this.$_scrollTop=r.getScrollTop()),!e&&t&&this.$_scrollTop&&this.$nextTick((function(){r.scrollTo(n.$_scrollTop,0)})))}},destroyed:function(){this.resetGifVideoObserver()}}}).call(this,n(55).default,n(66).default,n(38).default)},500:function(e,t,n){"use strict";(function(e,i,r){n(18),n(15),n(13),n(14),n(16),n(527),n(86),n(9),n(336);var o=n(2),u=n.n(o),s=n(4),a=n(488),d=n(489),c=n(492),l=n(147),f=n(29),m=n(67),h=n.n(m),p=n(494);function v(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=Object(s.a)("commentSystem/comment"),y=b.mapState,_=b.mapActions,S=b.mapGetters,I=Object(s.a)("commentSystem/user"),O=I.mapState,w=I.mapGetters,C=Object(s.a)("commentSystem/app").mapState,k=Object(s.a)("toast").mapActions;t.a={props:["comment"],mixins:[c.a,Object(p.c)({idProp:function(e){return e.comment.commentId}})],directives:{ClickOutside:h.a},idState:function(){return{showMenu:!1}},computed:g({},y(["reportPromise","opUserId"]),{},S(["getFollowStatus"]),{},O({userInfo:"info"}),{},w(["isLoggedIn"]),{},C({appInfo:"info"}),{showMenu:function(){return this.idState.showMenu},commentId:function(){return this.comment.commentId},threadId:function(){return this.comment.threadId},isFollowed:function(){return this.threadId&&this.getFollowStatus(this.threadId)},followBtnText:function(){return this.isFollowed?"Unfollow Comment":"Follow Comment"},isAuthor:function(){return this.isLoggedIn&&e.endsWith(this.comment.user.userId,this.userInfo.userId)},canShowFollow:function(){return!!this.threadId},canShowReport:function(){return!this.isAuthor},canShowDelete:function(){return!this.comment.childrenTotal&&this.isAuthor},canShowOpDelete:function(){return this.appInfo.opHideCommentFeature&&this.isLoggedIn&&!this.isAuthor&&e.endsWith(this.opUserId,this.userInfo.userId)}}),methods:g({},_({_deleteComment:"DELETE_COMMENT",_opHideComment:"OP_HIDE_COMMENT",_reportComment:"REPORT_COMMENT",fetchFollowStatus:"FETCH_FOLLOW_STATUS",updateFollowStatus:"UPDATE_FOLLOW_STATUS"}),{},k({displayToast:f.d.DISPLAY_TOAST}),{deleteComment:function(){var e=this,t=g({},this.comment);this._deleteComment({commentId:this.commentId}).then((function(){a.a.track(d.a.deleteComment,{CommentId:t.commentId,CommentLevel:t.level})})).catch((function(){e.hideMenu()}))},opHideComment:function(){var e=this;this._opHideComment({commentId:this.commentId}).then((function(){a.a.track(d.a.opHideComment,{CommentId:comment.commentId,CommentLevel:comment.level})})).catch((function(){e.hideMenu()}))},dislikeComment:function(){this.reportComment((function(){return Promise.resolve({reportType:12})}))},reportComment:function(e){var t=this;if(!this.redirectLogin()){var n=g({},this.comment);e(this.comment).then((function(e){return i.log("report promise data",e),t._reportComment({userReportData:e,commentId:t.comment.commentId})})).then((function(){a.a.track(d.a.reportComment,{CommentLevel:n.level,CommentId:n.commentId})})).catch((function(){t.hideMenu()}))}},clickMenu:function(){this.showMenu?this.hideMenu():(this.idState.showMenu=!0,this.fixVirtualScrollerItemZIndex(),a.a.track(d.a.openCommentMenu,{CommentId:this.commentId}))},hideMenu:function(){this.idState.showMenu=!1,this.fixVirtualScrollerItemZIndex(),a.a.track(d.a.closeCommentMenu,{CommentId:this.commentId})},clickExtraMenu:function(e){var t=this;this.isLoggedIn?this.fetchFollowStatus(this.threadId).finally((function(){return t.clickMenu(e)})):this.clickMenu(e)},clickFollowBtn:function(){var e=this;if(!this.redirectLogin()){var t=this.isFollowed?d.a.clickUnfollowThread:d.a.clickFollowThread;a.a.track(t,{ThreadId:this.threadId}),this.updateFollowStatus({threadId:this.threadId,follow:!this.isFollowed}).catch((function(){e.hideMenu()}))}},copyLink:function(){var e=this;a.a.track(d.a.copyCommentLink,{CommentId:this.commentId}),l.a.copyText(this.comment.permalink).then((function(){e.displayToast({type:r.INFO,msg:"Link Copied.",dismiss:!0})})).finally((function(){e.hideMenu()}))},fixVirtualScrollerItemZIndex:function(){var e=this.$refs.wrapper;if(e.closest){var t=e.closest(".vue-recycle-scroller__item-view");t&&(t.style.zIndex=this.showMenu?"1":"")}}})}}).call(this,n(55).default,n(17).default,n(115).default)},501:function(e,t,n){"use strict";(function(e){n(18),n(15),n(13),n(14),n(9),n(16),n(199),n(339),n(33),n(102);var i=n(2),r=n.n(i),o=n(488),u=n(489),s=n(4);function a(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}var d=Object(s.a)("commentSystem/app").mapState;t.a={props:["comment"],computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d({appInfo:"info"})),methods:{clickMention:function(e){o.a.track(u.a.clickMention,{CommentId:this.comment.commentId,CommentLevel:this.comment.level,Url:e})}},render:function(){var t=this,n=arguments[0],i=[],r=[],o=e.htmlDecode(this.comment.mediaText);if(o.replace(/@[a-z0-9_]+/gi,(function(e,i){var o=t.comment.mentionMapping;if(o[e]){var u=t.appInfo.mentionUrlPattern+o[e];r.push({start:i,end:i+e.length,el:n("a",{attrs:{target:"_blank",href:u},on:{click:t.clickMention.bind(t,u)}},[e])})}return e})),o.replace(/\n/g,(function(e,t){return r.push({start:t,end:t+e.length,el:n("br")}),e})),this.comment.user.isVerifiedAccount){var u=new RegExp(e.urlRegExp(),"g");o.replace(u,(function(e,t,i,o){return r.push({start:o,end:o+e.length,el:n("a",{attrs:{target:"_blank",href:e}},[e])}),e}))}r.sort((function(e,t){return e.start-t.start}));var s=0;return r.forEach((function(e){s!==e.start&&(i.push(o.substring(s,e.start)),s=e.start),i.push(e.el),s=e.end})),s!==o.length&&i.push(o.substring(s,o.length)),n("div",{class:"content"},[i.map((function(e){return e}))])}}}).call(this,n(55).default)},502:function(e,t,n){"use strict";n(18),n(15),n(13),n(14),n(9),n(16);var i=n(0),r=n.n(i),o=(n(23),n(3)),u=n.n(o),s=n(2),a=n.n(s),d=n(7),c=n.n(d),l=n(8),f=n.n(l),m=n(50),h=n.n(m),p=n(104),v=n.n(p),g=n(197),b=n.n(g);function y(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}var _=function(){function e(){c()(this,e),this.options={version:"v1"}}var t,n;return f()(e,[{key:"init",value:function(e){this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.options,{},e)}},{key:"baseUrl",value:function(){return"https://".concat(this.options.host,"/").concat(this.options.version)}},{key:"baseCdnUrl",value:function(){return"https://".concat(this.options.cdnHost,"/").concat(this.options.version,"/cacheable")}},{key:"fetchAppInfo",value:(n=u()(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.baseCdnUrl(),"/app.json"),e.prev=1,e.next=4,h.a.get(t,{params:{id:this.options.appId}});case 4:return n=e.sent,e.abrupt("return",n.data.payload.app);case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return n.apply(this,arguments)})},{key:"fetchUserInfo",value:(t=u()(r.a.mark((function e(){var t,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.baseUrl(),"/user.json"),n=b()(this.options,["appId","auth"]),e.prev=2,e.next=5,h.a.post(t,v.a.stringify(n));case 5:return i=e.sent,e.abrupt("return",i.data.payload);case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return t.apply(this,arguments)})}]),e}();t.a=new _},509:function(e,t,n){"use strict";(function(e){var i=n(2),r=n.n(i),o=(n(523),n(27),n(31),n(86),n(9),n(491)),u=n(29),s=n(197),a=n.n(s),d=n(19);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){t[e.commentId]=e,Array.isArray(e.children)&&e.children.length>0&&c(e.children,t)})),t}function l(e,t){return t[e]}function f(e,t){var n=e[t.commentId]||0;t.isLike.value!==n&&(t.isLike.value=n)}t.a={namespaced:!0,state:{comments:[],commentsCount:0,opUserId:null,hasNext:!1,commentsById:{},isLoading:!0,order:o.d,autoLoadCount:0,highlightedId:null,animateHighlightId:null,status:null,lock:null,url:null,cdnHost:null,host:null,enableTracking:!1,reportPromise:null,postKey:null,followStatusMap:{}},getters:{isLocked:function(e,t,n,i){return!i["commentSystem/user/canModerate"]&&e.lock},getFollowStatus:function(e){return function(t){return e.followStatusMap[t]}},shouldAutoFollowThread:function(e,t){return function(e){return e&&!t.getFollowStatus(e)}}},mutations:{SET_COMMENT_INFO:function(e,t){e.cdnHost=t.cdnHost,e.host=t.host,e.reportPromise=t.reportPromise||function(){return Promise.resolve()},e.url=t.url,e.postKey=t.postKey},SET_HIGHLIGHTED_ID:function(e,t){e.highlightedId=t},SET_ANIMATE_HIGHLIGHT_ID:function(e,t){e.animateHighlightId=t},INCREASE_AUTO_LOAD_COUNT:function(e){e.autoLoadCount++},SET_LOCK:function(e,t){e.lock=t},SET_STATUS:function(e,t){e.status=t},SET_LOADING:function(e,t){e.isLoading=t},RESET_COMMENTS:function(e,t){e.comments=t,e.commentsById=c(e.comments)},SET_COMMENTS:function(e,t){e.comments=e.comments.concat(t),e.commentsById=c(e.comments)},ADD_COMMENT:function(e,t){e.comments.unshift(t),e.commentsById=c(e.comments)},ADD_REPLY:function(t,n){n.isLocal=!0,e.log("Add reply",n);var i=l(n.parent,t.commentsById);i.children.push(n),e.log("Parent comment",i),t.commentsById=c(t.comments)},CLEAR_COMMENTS:function(e,t){e.order=t||o.d,e.autoLoadCount=0,e.comments=[]},SET_COMMENTS_COUNT:function(e,t){e.commentsCount=t},SET_OP_USER_ID:function(e,t){e.opUserId=t},SET_HAS_NEXT:function(e,t){e.hasNext=t},UPDATE_COMMENT_REPLIES:function(t,n){if(e.log("UPDATE_COMMENT_REPLIES",n),!n.commentId)throw{message:"UPDATE_COMMENT_REPLIES state mutation called without commentId"};var i=l(n.commentId,t.commentsById),r=i.children.map((function(e){return e.commentId}));i.hasNext=n.hasNext,i.children=i.children.concat(n.comments.filter((function(e){return!r.includes(e.commentId)}))),t.commentsById=c(t.comments)},UPDATE_LIKE:function(e,t){var n=l(t.commentId,e.commentsById),i=t.isLike.value-n.isLike.value;n.likeCount+=i,n.isLike.value=t.isLike.value},DELETE_COMMENT:function(e,t){var n,i=l(t.commentId,e.commentsById),r=(n=i.level>1?l(i.parent,e.commentsById).children:e.comments).findIndex((function(e){return e.commentId===t.commentId}));n.splice(r,1),e.commentsById=c(e.comments)},SET_FOLLOW_STATUS:function(e,t){var n=t.threadId,i=t.followed;d.a.set(e.followStatusMap,n,i)}},actions:{FETCH_COMMENTS:function(t,n){var i=t.commit,r=t.state,u=t.rootGetters,s=t.rootState;e.log("store fetch comment options",n);var a=u["commentSystem/user/hasActivities"];return e.log("fetch comment store hasActivities",a),a||(n.useCDN=!0),n.refresh&&i("CLEAR_COMMENTS",n.order),i("SET_LOADING",!0),e.log("fetch comment store hasActivities",n),o.f.fetchComments(n).then((function(t){if(t=t[r.url]){i("SET_OP_USER_ID",t.opUserId),i("SET_COMMENTS_COUNT",t.total),i("SET_HAS_NEXT",t.hasNext),i("SET_LOCK",t.lock),i("SET_STATUS",t.status),i("SET_LOADING",!1);var o=t.comments;return n.useCDN&&(o=function(t,n){return e.log("update like count from cache"),n&&t.forEach((function(e){f(n,e),e.children.forEach((function(e){f(n,e)}))})),t}(t.comments,s.commentSystem.user.likeMapping)),n.refresh?i("RESET_COMMENTS",o):i("SET_COMMENTS",o),t}})).catch((function(e){return i("SET_LOADING",!1),Promise.reject(e)}))},FETCH_MORE_REPLIES:function(t,n){var i=t.commit,r=t.state,u=t.rootGetters;return e.log("fetch more replies",n),u["commentSystem/user/hasActivities"]||(n.useCDN=!0),o.f.fetchComments(n).then((function(e){if(e=e[r.url]){var t=a()(e,["comments","hasNext"]);t.commentId=t.comments[0].parent,i("UPDATE_COMMENT_REPLIES",t)}}))},ADD_COMMENT:function(t,n){var i=t.commit,s=t.state,a=t.dispatch;return o.f.addComment(n).then((function(t){if(e.log("comment model data",t,s.url),t=t[s.url])return t.level>1?i("ADD_REPLY",t):i("ADD_COMMENT",t),a("commentSystem/user/".concat(u.b.UPDATE_COMMENTED_POST_URLS),r()({},s.url,1),{root:!0}),t.commentId}))},UPDATE_LIKE:function(e,t){var n=e.commit,i=(e.state,e.dispatch);return n("UPDATE_LIKE",t),o.f.updateLike({commentId:t.commentId,value:t.isLike.value}).then((function(){i("commentSystem/user/".concat(u.b.UPDATE_LIKE_MAPPING),r()({},t.commentId,t.isLike.value),{root:!0})}))},OP_HIDE_COMMENT:function(e,t){var n=e.commit;e.state;return n("DELETE_COMMENT",t),o.f.opHideComment(t)},DELETE_COMMENT:function(e,t){var n=e.commit;e.state;return n("DELETE_COMMENT",t),o.f.deleteComment(t)},REPORT_COMMENT:function(e,t){var n=e.commit,i=e.state,s=e.dispatch;return n("DELETE_COMMENT",t),o.f.reportComment(t).then((function(){s("commentSystem/user/".concat(u.b.UPDATE_REPORTED_POST_URLS),r()({},i.url,1),{root:!0})}))},UPDATE_LOCK:function(e,t){var n=e.commit;return o.f.updatePost({lock:t}).then((function(){n("SET_LOCK",!!t)}))},UPDATE_STATUS:function(e,t){var n=e.commit;return o.f.updatePost({status:t}).then((function(){n("SET_STATUS",t)}))},FETCH_FOLLOW_STATUS:function(e,t){var n=e.commit,i=e.getters;return t&&void 0===i.getFollowStatus(t)?o.f.fetchFollowStatus({threadId:t}).then((function(e){n("SET_FOLLOW_STATUS",{threadId:t,followed:!!e.followed})})):Promise.resolve()},UPDATE_FOLLOW_STATUS:function(e,t){var n=e.commit,i=t.threadId,r=t.follow;return o.f.updateFollowStatus({threadId:i,follow:r}).then((function(){n("SET_FOLLOW_STATUS",{threadId:i,followed:!!r})}))},ANIMATE_HIGHLIGHT_COMMENT:function(e,t){var n=e.commit,i=e.state;n("SET_ANIMATE_HIGHLIGHT_ID",t),setTimeout((function(){i.animateHighlightId===t&&n("SET_ANIMATE_HIGHLIGHT_ID",null)}),6e3)}}}}).call(this,n(17).default)},522:function(e,t,n){"use strict";var i=n(497).a,r=n(1),o=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.canShowInput?n("div",{staticClass:"comment-box first",class:{loading:e.loading,"indent-1":e.isReply}},[n("div",{staticClass:"avatar"},[n("div",{staticClass:"image-container"},[n("a",{attrs:{href:e.profileUrl,target:"_blank"}},[n("img",{attrs:{src:e.avatarUrl}})])])]),e._v(" "),n("div",{staticClass:"payload"},[e.errorMessage?n("div",{staticClass:"notice-message error"},[n("p",[e._v(e._s(e.errorMessage))]),e._v(" "),n("a",{staticClass:"close-btn",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.errorMessage=""}}},[e._v("")])]):e._e(),e._v(" "),n("div",{staticClass:"textarea-container"},[n("div",[e.isReactionMode?e._e():n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.idState.commentText,expression:"idState.commentText"}],ref:"commentInput",staticClass:"post-text-area focus",attrs:{placeholder:"Write comments..."},domProps:{value:e.idState.commentText},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterComment(t)},click:e.redirectLogin,focus:e.focusPostTextarea,input:function(t){t.target.composing||e.$set(e.idState,"commentText",t.target.value)}}}),e._v(" "),e.isReactionMode?n("input",{directives:[{name:"model",rawName:"v-model",value:e.idState.commentText,expression:"idState.commentText"}],staticClass:"focus",attrs:{type:"url",placeholder:"Paste Memeful URL..."},domProps:{value:e.idState.commentText},on:{click:e.redirectLogin,input:function(t){t.target.composing||e.$set(e.idState,"commentText",t.target.value)}}}):e._e()])]),e._v(" "),e.canShowUploadImageView?n("div",{staticClass:"cmnt-image-container"},[n("div",{staticClass:"img-container",class:{loading:e.uploading}},[e.uploading?n("div",{staticClass:"spinner-here"}):e._e(),e._v(" "),e.uploading?e._e():n("img",{attrs:{src:e.uploadedMediaUrl}}),e._v(" "),e.uploading?e._e():n("div",{staticClass:"overlay"},[n("a",{staticClass:"btn-delete",attrs:{href:"javascript:void(0);"},on:{click:function(t){e.media=null}}},[e._v("Delete")])])])]):e._e(),e._v(" "),n("div",{staticClass:"action"},[n("div",{staticClass:"lhs"},[e.canShowReactionButton?n("a",{key:"reaction",staticClass:"cmnt-reaction",attrs:{href:"https://"+this.appInfo.reactionImageSite,target:"_blank"},on:{click:e.toggleReactionMode}},[e._v("Post reaction")]):e._e(),e._v(" "),e.isReactionMode?n("a",{key:"reaction-cancel",staticClass:"cmnt-btn link grey size-30 submit-reaction",attrs:{href:"javascript:void(0);"},on:{click:e.toggleReactionMode}},[e._v("Cancel")]):e._e(),e._v(" "),e.canShowImageUploadButton?n("span",[n("a",{staticClass:"cmnt-image",attrs:{href:"javascript:void(0)"},on:{click:e.showFileInputBox}},[e._v("Post image")]),e._v(" "),n("input",{ref:"imageFileInput",staticClass:"hide",attrs:{type:"file",name:"blob"},on:{change:e.uploadImage}})]):e._e(),e._v(" "),e.canShowDelegate?n("label",{staticClass:"cmnt-identity"},[n("select",{on:{change:e.changeDelegate}},[n("option",{key:e.userInfo.userId,domProps:{value:e.userInfo.userId}},[e._v(e._s(e.userInfo.displayName)+" (Current user)")]),e._v(" "),e._l(e.userInfo.delegates,(function(t){return n("option",{key:t.userId,domProps:{value:t.userId}},[e._v(e._s(t.displayName))])}))],2)]):e._e()]),e._v(" "),n("div",{staticClass:"rhs"},[!e.isReactionMode&&e.messageLengthExceeded?n("p",{staticClass:"word-count",class:{red:e.messageLengthExceeded}},[n("span",[e._v(e._s(e.remainingCharactersLimit))])]):e._e(),e._v(" "),n("a",{staticClass:"cancel-input",attrs:{href:"javascript:void(0);"},on:{click:e.clickCancel}},[e._v("Cancel")]),e._v(" "),n("a",{staticClass:"cmnt-btn size-30 submit-comment",attrs:{href:"javascript:void(0);"},on:{click:e.postComment}},[e._v("Post")])])])]),e._v(" "),n("div",{staticClass:"clearfix"})]):e._e()}),[],!1,null,null,null);t.a=o.exports},523:function(e,t,n){"use strict";var i=n(41),r=n(337)(6),o="findIndex",u=!0;o in[]&&Array(1)[o]((function(){u=!1})),i(i.P+i.F*u,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(198)(o)},524:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var i=void 0;function r(){r.init||(r.init=!0,i=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):-1}())}var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{compareAndNotify:function(){this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.$emit("notify"))},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!i&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),delete this._resizeObject.onload)}},mounted:function(){var e=this;r(),this.$nextTick((function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight}));var t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",i&&this.$el.appendChild(t),t.data="about:blank",i||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()}};var u={version:"0.4.5",install:function(e){e.component("resize-observer",o),e.component("ResizeObserver",o)}},s=null;"undefined"!=typeof window?s=window.Vue:void 0!==e&&(s=e.Vue),s&&s.use(u)}).call(this,n(63))},525:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",(function(){return d}));var u=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,i)}var t,n,i;return t=e,(n=[{key:"createObserver",value:function(e,t){var n=this;if(this.observer&&this.destroyObserver(),!this.frozen){var i;if(this.options="function"==typeof(i=e)?{callback:i}:i,this.callback=function(e,t){n.options.callback(e,t),e&&n.options.once&&(n.frozen=!0,n.destroyObserver())},this.callback&&this.options.throttle){var r=(this.options.throttleOptions||{}).leading;this.callback=function(e,t){var n,i,r,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=function(s){for(var a=arguments.length,d=new Array(a>1?a-1:0),c=1;c<a;c++)d[c-1]=arguments[c];if(r=d,!n||s!==i){var l=u.leading;"function"==typeof l&&(l=l(s,i)),n&&s===i||!l||e.apply(void 0,[s].concat(o(r))),i=s,clearTimeout(n),n=setTimeout((function(){e.apply(void 0,[s].concat(o(r))),n=0}),t)}};return s._clear=function(){clearTimeout(n),n=null},s}(this.callback,this.options.throttle,{leading:function(e){return"both"===r||"visible"===r&&e||"hidden"===r&&!e}})}this.oldResult=void 0,this.observer=new IntersectionObserver((function(e){var t=e[0];if(e.length>1){var i=e.find((function(e){return e.isIntersecting}));i&&(t=i)}if(n.callback){var r=t.isIntersecting&&t.intersectionRatio>=n.threshold;if(r===n.oldResult)return;n.oldResult=r,n.callback(r,t)}}),this.options.intersection),t.context.$nextTick((function(){n.observer&&n.observer.observe(n.el)}))}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}])&&r(t.prototype,n),i&&r(t,i),e}();function s(e,t,n){var i=t.value;if(i)if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new u(e,i,n);e._vue_visibilityState=r}}function a(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var d={bind:s,update:function(e,t,n){var r=t.value;if(!function e(t,n){if(t===n)return!0;if("object"===i(t)){for(var r in t)if(!e(t[r],n[r]))return!1;return!0}return!1}(r,t.oldValue)){var o=e._vue_visibilityState;r?o?o.createObserver(r,n):s(e,{value:r},n):a(e)}},unbind:a};var c={version:"0.4.6",install:function(e){e.directive("observe-visibility",d)}},l=null;"undefined"!=typeof window?l=window.Vue:void 0!==e&&(l=e.Vue),l&&l.use(c)}).call(this,n(63))},526:function(e,t,n){var i,r,o;r=[],void 0===(o="function"==typeof(i=function(){var e=/(auto|scroll)/,t=function(e,n){return null===e.parentNode?n:t(e.parentNode,n.concat([e]))},n=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},i=function(t){return e.test(function(e){return n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x")}(t))};return function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var n=t(e.parentNode,[]),r=0;r<n.length;r+=1)if(i(n[r]))return n[r];return document.scrollingElement||document.documentElement}}})?i.apply(t,r):i)||(e.exports=o)},527:function(e,t,n){"use strict";var i=n(41),r=n(87),o=n(42),u=n(229),s=n(338);i(i.P+i.R,"Promise",{finally:function(e){var t=u(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},528:function(e,t,n){"use strict";
/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var i=function(){var e={base:"https://twemoji.maxcdn.com/v/13.0.0/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(e){var t="string"==typeof e?parseInt(e,16):e;if(t<65536)return s(t);return s(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:v},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:function(t,n){n&&"function"!=typeof n||(n={callback:n});return("string"==typeof t?f:l)(t,{callback:n.callback||d,attributes:"function"==typeof n.attributes?n.attributes:h,base:"string"==typeof n.base?n.base:e.base,ext:n.ext||e.ext,size:n.folder||(i=n.size||e.size,"number"==typeof i?i+"x"+i:i),className:n.className||e.className,onerror:n.onerror||e.onerror});var i},replace:p,test:function(e){n.lastIndex=0;var t=n.test(e);return n.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udeeb\udeec\udef4-\udefc\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78\udd7a-\uddb4\uddb7\uddba\uddbc-\uddcb\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7a\ude80-\ude86\ude90-\udea8\udeb0-\udeb6\udec0-\udec2\uded0-\uded6]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,i=/\uFE0F/g,r=String.fromCharCode(8205),o=/[&<>'"]/g,u=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,s=String.fromCharCode;return e;function a(e,t){return document.createTextNode(t?e.replace(i,""):e)}function d(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function c(e){return v(e.indexOf(r)<0?e.replace(i,""):e)}function l(e,t){for(var i,r,o,s,d,l,f,m,h,p,v,g,b,y=function e(t,n){for(var i,r,o=t.childNodes,s=o.length;s--;)3===(r=(i=o[s]).nodeType)?n.push(i):1!==r||"ownerSVGElement"in i||u.test(i.nodeName.toLowerCase())||e(i,n);return n}(e,[]),_=y.length;_--;){for(o=!1,s=document.createDocumentFragment(),l=(d=y[_]).nodeValue,m=0;f=n.exec(l);){if((h=f.index)!==m&&s.appendChild(a(l.slice(m,h),!0)),g=c(v=f[0]),m=h+v.length,b=t.callback(g,t),g&&b){for(r in(p=new Image).onerror=t.onerror,p.setAttribute("draggable","false"),i=t.attributes(v,g))i.hasOwnProperty(r)&&0!==r.indexOf("on")&&!p.hasAttribute(r)&&p.setAttribute(r,i[r]);p.className=t.className,p.alt=v,p.src=b,o=!0,s.appendChild(p)}p||s.appendChild(a(v,!1)),p=null}o&&(m<l.length&&s.appendChild(a(l.slice(m),!0)),d.parentNode.replaceChild(s,d))}return e}function f(e,t){return p(e,(function(e){var n,i,r=e,u=c(e),s=t.callback(u,t);if(u&&s){for(i in r="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',e,'"',' src="',s,'"'),n=t.attributes(e,u))n.hasOwnProperty(i)&&0!==i.indexOf("on")&&-1===r.indexOf(" "+i+"=")&&(r=r.concat(" ",i,'="',n[i].replace(o,m),'"'));r=r.concat("/>")}return r}))}function m(e){return t[e]}function h(){return null}function p(e,t){return String(e).replace(n,t)}function v(e,t){for(var n=[],i=0,r=0,o=0;o<e.length;)i=e.charCodeAt(o++),r?(n.push((65536+(r-55296<<10)+(i-56320)).toString(16)),r=0):55296<=i&&i<=56319?r=i:n.push(i.toString(16));return n.join(t||"-")}}();t.a=i},529:function(e,t,n){
/*! lozad.js - v1.14.0 - 2019-10-19
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2019 Apoorv Saxena; Licensed MIT */
e.exports=function(){"use strict";var e="undefined"!=typeof document&&document.documentMode,t={rootMargin:"0px",threshold:0,load:function(t){if("picture"===t.nodeName.toLowerCase()){var n=document.createElement("img");e&&t.getAttribute("data-iesrc")&&(n.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(n.alt=t.getAttribute("data-alt")),t.append(n)}if("video"===t.nodeName.toLowerCase()&&!t.getAttribute("data-src")&&t.children){for(var i=t.children,r=void 0,o=0;o<=i.length-1;o++)(r=i[o].getAttribute("data-src"))&&(i[o].src=r);t.load()}if(t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset")),t.getAttribute("data-background-image"))t.style.backgroundImage="url('"+t.getAttribute("data-background-image").split(",").join("'),url('")+"')";else if(t.getAttribute("data-background-image-set")){var u=t.getAttribute("data-background-image-set").split(","),s=u[0].substr(0,u[0].indexOf(" "))||u[0];s=-1===s.indexOf("url(")?"url("+s+")":s,1===u.length?t.style.backgroundImage=s:t.setAttribute("style",(t.getAttribute("style")||"")+"background-image: "+s+"; background-image: -webkit-image-set("+u+"); background-image: image-set("+u+")")}t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded:function(){}};function n(e){e.setAttribute("data-loaded",!0)}var i=function(e){return"true"===e.getAttribute("data-loaded")};return function(){var e,r,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=Object.assign({},t,u),a=s.root,d=s.rootMargin,c=s.threshold,l=s.load,f=s.loaded,m=void 0;return"undefined"!=typeof window&&window.IntersectionObserver&&(m=new IntersectionObserver((e=l,r=f,function(t,o){t.forEach((function(t){(0<t.intersectionRatio||t.isIntersecting)&&(o.unobserve(t.target),i(t.target)||(e(t.target),n(t.target),r(t.target)))}))}),{root:a,rootMargin:d,threshold:c})),{observe:function(){for(var e=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)}(o,a),t=0;t<e.length;t++)i(e[t])||(m?m.observe(e[t]):(l(e[t]),n(e[t]),f(e[t])))},triggerLoad:function(e){i(e)||(l(e),n(e),f(e))},observer:m}}}()},530:function(e,t,n){"use strict";(function(e){n(18),n(15),n(13),n(14),n(16),n(86),n(9);var i,r=n(2),o=n.n(r),u=n(502),s=n(29);function a(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={userId:null,displayName:null,emojiStatus:null,avatarUrl:null,role:null,profileUrl:null,moderate:null,permissions:null,delegates:null};t.a={namespaced:!0,state:{auth:null,info:d({},c),commentedPostUrls:{},reportedPostUrls:{},likeMapping:{},quota:{}},getters:{isLoggedIn:function(e){return null!==e.info.userId},hasActivities:function(e,t,n){if(null===e.info.userId)return!1;if(e.info.moderate)return!0;var i=n.commentSystem.comment.url,r=e.commentedPostUrls,o=e.reportedPostUrls,u=!1;return r&&r[i]&&(u=!0),o&&o[i]&&(u=!0),u},canComment:function(e){return e.quota&&e.quota.count?e.quota.count>0:!!e.expiry&&Date.now()>e.expiry},waitTimeToComment:function(t){return t.quota?t.quota.wait>0&&e.secondsToHrs(t.quota.wait):0},canModerate:function(e){return e.info.moderate}},mutations:{setAuth:function(e,t){e.auth=t},setUserInfo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.info=t.user||d({},c),e.commentedPostUrls=t.commentedPostUrls||{},e.reportedPostUrls=t.reportedPostUrls||{},e.likeMapping=t.likeMapping||{},e.quota=t.quota||{}},updateCommentedPostUrls:function(e,t){e.commentedPostUrls=t},updateReportedPostUrls:function(e,t){e.reportedPostUrls=t},updateLikeMapping:function(e,t){e.likeMapping=t},updateQuota:function(e,t){t.wait&&(t.expiry=Date.now()+1e3*t.wait),e.quota=t}},actions:(i={},o()(i,s.b.FETCH_USER_INFO,(function(e,t){var n=e.commit,i=e.state,r=t.auth;return r&&i.auth===r||n("setUserInfo"),n("setAuth",r),!r||i.info.userId?Promise.resolve():u.a.fetchUserInfo().then((function(e){n("setUserInfo",e)}))})),o()(i,s.b.UPDATE_COMMENTED_POST_URLS,(function(e,t){(0,e.commit)("updateCommentedPostUrls",d({},e.state.commentedPostUrls,{},t))})),o()(i,s.b.UPDATE_REPORTED_POST_URLS,(function(e,t){(0,e.commit)("updateReportedPostUrls",d({},e.state.reportedPostUrls,{},t))})),o()(i,s.b.UPDATE_LIKE_MAPPING,(function(e,t){(0,e.commit)("updateLikeMapping",d({},e.state.likeMapping,{},t))})),o()(i,s.b.UPDATE_QUOTA,(function(e,t){(0,e.commit)("updateQuota",d({},e.state.quota,{},t))})),i)}}).call(this,n(66).default)},582:function(e,t,n){"use strict";n(18),n(15),n(13),n(14),n(9),n(16);var i=n(2),r=n.n(i),o=n(4),u=n(104),s=n.n(u),a=n(488),d=n(489),c=n(491),l=n(67),f=n.n(l);function m(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=Object(o.a)("commentSystem/comment"),v=p.mapState,g=p.mapActions,b=Object(o.a)("commentSystem/user").mapGetters,y=Object(o.a)("commentSystem/app").mapState,_={data:function(){return{STATUS_DEFAULT:0,STATUS_NEW_SORTING:1,ORDER_HOT:c.d,ORDER_FRESH:c.c,showMenu:!1}},directives:{ClickOutside:f.a},computed:h({},v(["order","url","host","lock","status"]),{},y({appInfo:"info"}),{},b(["canModerate"]),{params:function(){return s.a.stringify({appId:this.appInfo.appId,url:this.url})},isNewOnly:function(){return 1==this.status}}),methods:h({},g({fetchComments:"FETCH_COMMENTS",_updateLock:"UPDATE_LOCK",_updateStatus:"UPDATE_STATUS"}),{changeOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.d;a.a.track(e===c.d?d.a.clickOrderHot:d.a.clickOrderFresh),this.fetchComments({order:e,refresh:!0})},updateLock:function(e){confirm("Admin: Confirm ".concat(e?"lock":"unlock"," post?"))&&this._updateLock(e),this.hideMenu()},updateStatus:function(e){confirm("Admin: Confirm update post sorting?")&&this._updateStatus(e),this.hideMenu()},clickMenu:function(){this.showMenu=!this.showMenu},hideMenu:function(){this.showMenu=!1}})},S=n(1),I=Object(S.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tab-bar-right"},[e.isNewOnly?e._e():n("ul",{staticClass:"tab"},[n("li",{class:{active:e.order===e.ORDER_HOT}},[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.changeOrder(e.ORDER_HOT)}}},[e._v("Hot")])]),e._v(" "),n("li",{class:{active:e.order===e.ORDER_FRESH}},[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.changeOrder(e.ORDER_FRESH)}}},[e._v("Fresh")])])]),e._v(" "),e.canModerate?n("div",{staticClass:"overflow-menu"},[n("a",{staticClass:"menu-trigger",attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.clickMenu(t)}}},[e._m(0)]),e._v(" "),e.showMenu?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideMenu,expression:"hideMenu"}],staticClass:"comment-pop-menu"},[n("ul",[n("li",[n("a",{attrs:{target:"_blank",href:"//"+e.host+"/admin"}},[e._v("Comment Admin")])]),e._v(" "),n("li",[e.lock?e._e():n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.updateLock(1)}}},[e._v("Lock Post")])]),e._v(" "),n("li",[e.lock?n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.updateLock(0)}}},[e._v("Unlock Post")]):e._e()]),e._v(" "),n("li",[e.isNewOnly?e._e():n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.updateStatus(e.STATUS_NEW_SORTING)}}},[e._v("Sort by New Only")])]),e._v(" "),n("li",[e.isNewOnly?n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.updateStatus(e.STATUS_DEFAULT)}}},[e._v("Default Sorting")]):e._e()]),e._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+e.host+"/admin/comments/search?"+e.params}},[e._v("All Comments")])]),e._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+e.host+"/admin/comments/hidden?"+e.params}},[e._v("Hidden Comments")])]),e._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+e.host+"/admin/comments/reported?"+e.params}},[e._v("Reported Comments")])]),e._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+e.host+"/admin/comments/image-comments?"+e.params}},[e._v("Image Comments")])]),e._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+e.host+"/admin/comment-score/index?"+e.params}},[e._v("Comment Score")])])])]):e._e()]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"inline-icon"},[t("span",{staticClass:"dot-menu"},[t("span",{staticClass:"dot-1"}),t("span",{staticClass:"dot-2"}),t("span",{staticClass:"dot-3"})])])}],!1,null,null,null);t.a=I.exports},583:function(e,t,n){"use strict";n(18),n(15),n(13),n(14),n(9),n(16);var i=n(2),r=n.n(i),o=n(4),u=n(488),s=n(489),a=n(492);function d(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}Object(o.a)("commentSystem/app").mapState;var c=Object(o.a)("commentSystem/comment"),l=(c.mapState,c.mapActions),f=(c.mapGetters,c.mapMutations,{props:["comment"],mixins:[a.a],data:function(){return{UPVOTE:"up",DOWNVOTE:"down"}},computed:{commentId:function(){return this.comment.commentId},isUp:function(){return this.comment.isLike.value>=1},isDown:function(){return this.comment.isLike.value<=-1}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l({_updateLike:"UPDATE_LIKE"}),{updateLike:function(e){var t=this;if(!this.redirectLogin()){var n=s.a.unvoteComment;return 1===e?n=s.a.upvoteComment:-1===e&&(n=s.a.downvoteComment),this._updateLike({isLike:{value:e},commentId:this.commentId}).then((function(){u.a.track(n,{CommentLevel:t.comment.level,CommentId:t.commentId})}))}},vote:function(e){"up"===e?this.isUp?this.updateLike(0):this.updateLike(1):"down"===e&&(this.isDown?this.updateLike(0):this.updateLike(-1))}})}),m=n(1),h=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vote-buttons"},[n("a",{class:{up:e.isUp},attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.vote(e.UPVOTE)}}},[n("span",{staticClass:"icn-up"})]),e._v(" "),n("span",{staticClass:"seperator"}),e._v(" "),n("a",{class:{down:e.isDown},attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.vote(e.DOWNVOTE)}}},[n("span",{staticClass:"icn-down"})])])}),[],!1,null,null,null);t.a=h.exports},584:function(e,t,n){"use strict";var i=n(500).a,r=n(1),o=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrapper",staticClass:"extra-menu"},[n("a",{staticClass:"menu-trigger",class:{active:e.showMenu},attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.clickExtraMenu(t)}}},[n("span",{staticClass:"drop"})]),e._v(" "),e.showMenu?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideMenu,expression:"hideMenu"}],staticClass:"comment-pop-menu"},[n("ul",[n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.copyLink(t)}}},[e._v("Copy link")])]),e._v(" "),e.canShowFollow?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.clickFollowBtn(t)}}},[e._v(e._s(e.followBtnText))])]):e._e(),e._v(" "),e.canShowDelete?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.deleteComment(t)}}},[e._v("Delete comment")])]):e._e(),e._v(" "),e.canShowOpDelete?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.opHideComment(t)}}},[e._v("Delete comment")])]):e._e(),e._v(" "),e.canShowReport?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.reportComment(e.reportPromise)}}},[e._v("Report comment")])]):e._e(),e._v(" "),e.canShowReport?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.dislikeComment(t)}}},[e._v("I just don't like it")])]):e._e()])]):e._e()])}),[],!1,null,null,null);t.a=o.exports},585:function(e,t,n){"use strict";var i=n(498).a,r=n(1),o=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.showNoCommentText?n("div",{staticClass:"notice-message"},[n("p",{staticClass:"align-center"},[e._v("Be the first to comment!")]),e._v(" "),n("div",{staticClass:"btn-container align-center"},[n("a",{staticClass:"btn",attrs:{href:"javascript:void(0);"},on:{click:e.firstToComment}},[e._v("Say something nice")])])]):e._e(),e._v(" "),e.useScroller?n("DynamicScroller",{key:e.$route.fullPath+":"+e.isSection,attrs:{"page-mode":"",items:e.getComments,minItemSize:85,buffer:e.getWinHeight(),"key-field":"commentId"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.item,i=e.active;return[n("DynamicScrollerItem",{attrs:{item:t,active:i,"size-dependencies":[t.mediaText,t.media,t.children,t.hasNext]}},[n("CommentItemView",{attrs:{comment:t,scroller:!0}})],1)]}}],null,!1,4261837605)}):e._l(e.getComments,(function(e){return n("CommentItemView",{key:e.commentId,attrs:{comment:e}})})),e._v(" "),e.canScrollMore?n("LoadMore",{key:e.$route.fullPath,ref:"loadMore",attrs:{threshold:700},on:{loadMore:e.loadMoreHandler}}):e._e(),e._v(" "),e.canShowLoading?n("div",{staticClass:"spinner-here"}):e._e(),e._v(" "),e.canLoadMore?n("div",{staticClass:"comment-pagination"},[n("div",{staticClass:"btn-container"},[n("a",{staticClass:"cmnt-btn more grey",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.fetchMoreComments("Click")}}},[n("span",{staticClass:"label"},[e._v("Load More Comments")])])])]):e._e()],2)}),[],!1,null,null,null);t.a=o.exports},586:function(e,t,n){"use strict";var i=n(499).a,r=n(1),o=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"comment-entry",class:e.commentEntryClasses,on:{mouseenter:function(t){return t.stopPropagation(),e.setMouseStates("hover",!0)},mouseleave:function(t){return t.stopPropagation(),e.resetMouseStates(t)},mousedown:function(t){return e.setMouseStates("active",!0)},mouseup:function(t){return e.setMouseStates("active",!1)},click:e.onItemClick}},[n("div",{staticClass:"avatar"},[n("div",{staticClass:"image-container"},[n("a",{attrs:{href:e.profileUrl,target:"_blank"},on:{click:function(t){return t.stopPropagation(),e.clickAvatar(t)}}},[n("img",{key:e.comment.user.avatarUrl,attrs:{src:e.comment.user.avatarUrl,loading:"lazy"}})])])]),e._v(" "),n("div",{staticClass:"payload"},[n("div",{staticClass:"info"},[n("div",{staticClass:"info-container"},[n("a",{ref:"username",staticClass:"username",attrs:{href:e.profileUrl,target:"_blank"},on:{click:function(t){return t.stopPropagation(),e.clickName(t)}}},[e._v(e._s(e.comment.user.displayName))]),e._v(" "),e.isVerifiedAccount?n("span",{staticClass:"verified-account"}):e._e(),e._v(" "),e.emojiStatus?n("span",{key:e.emojiStatus,ref:"emojiStatus",staticClass:"status"},[e._v(e._s(e.emojiStatus))]):e._e(),e._v(" "),e.isProPlus&&!e.hideProBadge?n("span",{staticClass:"badge pro plus"},[e._v("Pro+")]):e.isPro&&!e.hideProBadge?n("span",{staticClass:"badge pro"},[e._v("Pro")]):e._e(),e._v(" "),n("span",{staticClass:"meta"},[e.isOp?n("span",[n("span",{staticClass:"label role-op",attrs:{title:"Original Poster"}},[e._v("OP")]),e._v(" "),n("span",[e._v("  ")])]):e._e(),e._v(" "),e.pointsText?n("span",[n("span",{staticClass:"points"},[e._v(e._s(e.pointsText))]),e._v(" "),n("span",[e._v("  ")])]):e._e(),e._v(" "),n("span",{staticClass:"time"},[n("a",{staticClass:"comment-permalink",attrs:{href:e.comment.permalink,target:"_blank"},on:{click:function(t){return t.stopPropagation(),e.clickAge(t)}}},[e._v(e._s(e.commentAge))])])])])]),e._v(" "),n("CommentItemCommentText",{attrs:{comment:e.comment}}),e._v(" "),e.imageInfo.imageUrl?n("div",{staticClass:"media"},[n("a",{staticClass:"img-embed",attrs:{href:e.imageInfo.imageHref,target:"_blank"},on:{click:function(t){return t.stopPropagation(),e.clickImage(t)}}},[e.imageInfo.isVideo?n("video",{key:e.imageInfo.imageUrl,ref:"gifVideo",attrs:{"data-src":e.imageInfo.imageUrl,autoplay:"",muted:"",loop:"",playsinline:"","webkit-playsinline":""},domProps:{muted:!0}}):n("picture",[e.imageInfo.webpUrl?n("source",{attrs:{srcset:e.imageInfo.webpUrl,type:"image/webp"}}):e._e(),e._v(" "),n("img",{key:e.imageInfo.imageUrl,attrs:{src:e.imageInfo.imageUrl,loading:"lazy"}})])])]):e._e(),e._v(" "),n("div",{staticClass:"action"},[e.isLocked?e._e():n("span",[n("a",{staticClass:"reply",attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.onReplyClick(t)}}},[e._v("Reply")])]),e._v(" "),n("CommentItemVoteBtnView",{attrs:{comment:e.comment}}),e._v(" "),!e.isAuthor&&e.canModerate?n("span",[n("span",[n("a",{staticClass:"admin",attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.hide(t)}}},[e._v(e._s(this.hidden?"Unhide":"Hide"))])]),e._v(" "),n("span",[e.comment.type===e.TYPE_USER_MEDIA?n("a",{staticClass:"admin",attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.hideBadImage(t)}}},[e._v(e._s(this.hidden?"Unhide (Bad Image)":"Hide (Bad Image)"))]):e._e()]),e._v(" "),n("span",[n("a",{staticClass:"admin",attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.ban(t)}}},[e._v(e._s(this.banned?"Unban":"Ban"))])])]):e._e(),e._v(" "),e.canModerate?n("span",[n("span",[e.isChild?e._e():n("a",{staticClass:"admin",attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.pin(t)}}},[e._v(e._s(this.isPinned?"Unpin":"Pin"))])])]):e._e()],1)],1),e._v(" "),n("CommentItemExtraMenuView",{ref:"extraMenu",attrs:{comment:e.comment}}),e._v(" "),n("div",{staticClass:"clearfix"})],1),e._v(" "),e.idState.replyBox?n("CommentInputView",{attrs:{idStateKey:e.comment.commentId,"is-reply":!0,"reply-box-comment-id":e.comment.commentId,"thread-id":e.comment.threadId,"reply-mention-user":e.comment.user},on:{dismiss:e.hideReplyBox}}):e._e(),e._v(" "),e.hideReplies?e._e():e._l(e.getChildren,(function(e){return n("CommentItemView",{key:e.commentId,attrs:{comment:e}})})),e._v(" "),e.hasReplies?n("a",{staticClass:"collapsed-comment",class:e.loadMoreBtnClasses,attrs:{href:"javascript:void(0);"},on:{click:e.fetchMoreReplies,mouseenter:function(t){return t.stopPropagation(),e.viewRepliesMouseHandler("hover",!0)},mouseleave:function(t){return t.stopPropagation(),e.resetMouseStates(t)},mousedown:function(t){return t.stopPropagation(),e.viewRepliesMouseHandler("active",!0)},mouseup:function(t){return t.stopPropagation(),e.viewRepliesMouseHandler("active",!1)}}},[e.idState.isLoadingReplies?e._e():n("span",[e._v(e._s(e.loadReplyText))]),e._v(" "),e.idState.isLoadingReplies?n("span",[e._v("Loading")]):e._e()]):e._e(),e._v(" "),e._l(e.getLocalChildren,(function(e){return n("CommentItemView",{key:e.commentId,attrs:{comment:e,id:e.commentId}})}))],2)}),[],!1,null,null,null);t.a=o.exports},587:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return y}));n(27),n(31);var i=n(509),r=(n(18),n(15),n(13),n(14),n(16),n(0)),o=n.n(r),u=n(2),s=n.n(u),a=(n(86),n(9),n(23),n(3)),d=n.n(a),c=n(502),l=n(29);function f(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h,p={namespaced:!0,state:{info:{appId:null,maxDisplayLevel:null,maxMessageLength:null,allowImageUploadFeature:null,opHideCommentFeature:null,anonymousAvatarUrl:null,reactionImageSite:null,mentionUrlPattern:null,refDomain:null,autoLoadMaxTimes:null,allowPostUrlComment:null}},mutations:{setAppInfo:function(e,t){e.info=t}},actions:s()({},l.a.FETCH_APP_INFO,(h=d()(o.a.mark((function e(t,n){var i,r,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.commit,!(r=t.state).info.appId||r.info.appId!==n.appId){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:return e.next=5,c.a.fetchAppInfo();case 5:u=e.sent,i("setAppInfo",m({appId:n.appId,autoLoadMaxTimes:n.autoLoadMaxTimes||7},u));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return h.apply(this,arguments)}))},v=n(530),g=n(97);function b(){return{namespaced:!0,modules:{comment:i.a,app:p,user:v.a}}}function y(e){Object(g.a)({key:"comment::appState",paths:["commentSystem.app.info"],filter:function(e){return["commentSystem/app/setAppInfo"].includes(e.type)}},600)(e),Object(g.a)({key:"comment::userState",paths:["commentSystem.user.auth","commentSystem.user.info","commentSystem.user.commentedPostUrls","commentSystem.user.reportedPostUrls","commentSystem.user.likeMapping"],filter:function(e){return["commentSystem/user/setAuth","commentSystem/user/setUserInfo","commentSystem/user/updateCommentedPostUrls","commentSystem/user/updateReportedPostUrls","commentSystem/user/updateLikeMapping"].includes(e.type)}},600)(e)}},588:function(e,t,n){"use strict";var i=n(501).a,r=n(1),o=Object(r.a)(i,void 0,void 0,!1,null,null,null);t.a=o.exports}}]);